---
sidebar_position: 4
---

# Ruby Language Support

SpiceCode extends its analytical capabilities to Ruby, a dynamic, open-source programming language known for its focus on simplicity and productivity, often identified by the `.rb` file extension. Recognizing Ruby's continued relevance in web development (particularly with frameworks like Ruby on Rails), scripting, and automation, SpiceCode features a dedicated, native lexer and parser designed specifically for Ruby's elegant syntax. This ensures that Ruby projects can be analyzed thoroughly and accurately within the SpiceCode ecosystem without reliance on external Ruby interpreters or analysis tools, providing a self-sufficient analysis environment akin to the resourcefulness of the Fremen in the harsh Arrakis climate.

## Native Lexer and Parser

The core of Ruby support in SpiceCode lies in its custom-built lexer (`rubylexer.py` within the `lexers/ruby` directory) and the integrated parsing logic. This native implementation is carefully crafted to tokenize Ruby source code, correctly identifying keywords (like `def`, `class`, `module`, `end`), identifiers, operators, literals (strings, symbols, numbers, arrays, hashes), and comments (`#`). The parser utilizes this token stream to construct an internal representation of the Ruby code's structure, enabling the various SpiceCode analyzers to perform meaningful evaluations.

Advantages of this native approach include:

1.  **Accuracy:** The lexer and parser are tailored to Ruby's specific syntax rules, leading to a more precise understanding of the code structure compared to generic parsing methods.
2.  **Independence:** SpiceCode can analyze `.rb` files without requiring a Ruby runtime environment to be installed on the user's system (beyond the Python environment needed for SpiceCode itself).
3.  **Consistency:** The analysis process for Ruby aligns seamlessly with how SpiceCode handles Python, JavaScript, and Go, offering a unified and predictable user experience across different language projects.

## Applicable Analyzers

Most of SpiceCode's standard suite of analyzers are effective on Ruby code, drawing upon the structural information provided by the native lexer and parser. When analyzing a `.rb` file, users can benefit from insights generated by analyzers such as:

*   **Line Counts (`count_lines`):** Delivers the standard metrics for total, code, and blank lines.
*   **Comment Analysis (`count_comment_lines`, `count_inline_comments`, `count_comment_ratio`):** Analyzes the frequency and placement of `#` comments.
*   **Function/Method Analysis (`count_functions`, `count_method_type`):** Counts `def` statements within classes, modules, or at the top level. It might also differentiate between instance methods, class methods, etc., based on definitions.
*   **Dependency Analysis (`count_external_dependencies`):** Tracks `require` and `load` statements to measure the code's reliance on external gems or standard libraries.
*   **Indentation Analysis (`indentation`):** Checks for consistent indentation, which, while not syntactically mandatory like in Python, is crucial for readability in Ruby (typically 2 spaces).

## Example Analysis

Consider this simple Ruby file, `greeter.rb`:

```ruby
# A simple Ruby class for greetings
require 'json' # Example dependency

class Greeter
  attr_reader :name

  # Initialize with a name
  def initialize(name)
    @name = name
  end

  def greet
    # Generate a greeting message
    message = "Hello, #{@name}! Welcome from Ruby."
    puts message # Output the message
    return message
  end

  # Class method example
  def self.default_greeting
    puts "Standard Ruby greeting!"
  end
end

# Script execution
if __FILE__ == $0
  greeter = Greeter.new("Ruby Enthusiast")
  greeter.greet
  Greeter.default_greeting
end
```

Running `spice analyze greeter.rb --all` would utilize the Ruby lexer and parser. The analyzers would then provide metrics on line counts, comment usage, the number of methods (`initialize`, `greet`, `default_greeting`), the external dependency (`json`), and indentation consistency.

To save these results, for instance, in Markdown format:

```bash
spice export greeter.rb --format markdown --output greeter_analysis.md
```

This command generates a `greeter_analysis.md` file containing a human-readable report of the analysis metrics.

SpiceCode's dedicated native support for Ruby ensures that developers working within the Ruby ecosystem can leverage detailed, consistent code analysis to maintain high standards of code quality, readability, and maintainability in their projects.
